<div style="display: flex; flex-direction: row-reverse; justify-content: flex-end">
  <section id="forum">
    <gato-forum></gato-forum>
  </section>
  <section id="wiki">
    <gato-wiki></gato-wiki>
  </section>
  <nav>
    <button mat-icon-button class="mudarTema" (click)="mudarTema()">
      <mat-icon *ngIf="modoAtual == ModoTema.escuro; else escuro">
        light_mode
      </mat-icon>
      <ng-template #escuro>
        <mat-icon>dark_mode</mat-icon>
      </ng-template>
    </button>

    <div class="botoes">

      <button id="profile" (click)="toggleProfile()">
        <img ngSrc="{{ src }}" alt="" width="60" height="60" priority>
      </button>
      <div @aparecer class="popupProfile" *ngIf="popupProfile">
        <div class="user">
          <div id="profilePic">
            <img ngSrc="{{ src }}" alt="" width="100" height="100" priority>
            <input type="file" name="profileSelect" id="profileSelect" (change)="quandoPegarFoto()"
                   #profileSelect accept=".jpg,.jpeg,.png">
            <button class="notNav" id="selecionarFoto" (click)="profileSelect.click()">
              <mat-icon>add_photo_alternate</mat-icon>
            </button>
          </div>
          <h1 id="username">{{ username }}</h1>
        </div>

        <mat-divider class="configDivider"/>

        <div>
          <h2>Bio</h2>
          <div id="idle" *ngIf="!editMode; else editando">
            <p>{{ userBio }}</p>
            <button mat-icon-button id="editBio" class="notNav" (click)="toggleEditMode()">
              <mat-icon>edit</mat-icon>
            </button>
          </div>
          <ng-template #editando>
            <div id="editando">
              <textarea id="novaBio" name="Nova bio" maxlength="255" placeholder="(vazio)" [value]="userBio"></textarea>
              <div style="display: flex; justify-content: flex-end">
                <button class="notNav" (click)="toggleEditMode()">CANCELAR</button>
                <button class="notNav" (click)="atualizarBio()">SALVAR</button>
              </div>
            </div>
          </ng-template>
        </div>

        <mat-divider class="configDivider"/>

        <button class="notNav" mat-raised-button color="warn" (click)="toggleDelete()">DELETAR CONTA</button>
      </div>

      <button id="config" (click)="toggleConfig()">
        <mat-icon>more_horiz</mat-icon>
      </button>
      <div @aparecer class="popupConfig" *ngIf="popupConfig">
        <h1>Gatopédia! Web</h1>
        <p>feito com &#x2764; por Danilo Lima</p>
        <p>&copy; {{ ano }} oculosdanilo <br>Todos os direitos reservados</p>

        <mat-divider class="configDivider"/>

        <a mat-raised-button href="https://github.com/oculosdanilo/gatopediaweb" target="_blank">
          <span nz-icon nzType="github" nzTheme="outline"></span>
          Repositório
        </a> <br>
        <a mat-raised-button href="https://etec199-danilolima.xp3.biz/2023/0318" target="_blank">
          <mat-icon>language</mat-icon>
          Site principal
        </a>
      </div>

      <div @aparecer (click)="toggleSair()" class="bgBlur" *ngIf="popupSair"></div>
      <button
        id="sair"
        (click)="toggleSair()"
      >
        <mat-icon>logout</mat-icon>
      </button>
      <div @aparecer class="popupSair" *ngIf="popupSair">
        <h1>
          Tem certeza que deseja sair?
        </h1>
        <div>
          <button (click)="toggleSair()" id="cancelarSair">
            Cancelar
          </button>
          <button (click)="sair()" id="sairSair">
            Sair
          </button>
        </div>
      </div>

    </div>
  </nav>

  <div @aparecer class="bgBlur" *ngIf="popupProfileEdit">
    <div style="position: relative; width: 150px; height: 150px">
      <img ngSrc="assets/gato.svg" alt="" fill/>
    </div>
  </div>
  <div @aparecer id="photoEdit" *ngIf="popupProfileEdit">
    <div>
      <!--suppress AngularNgOptimizedImage -->
      <img src="" alt="" id="crop">
    </div>

    <div style="display: flex; justify-content: flex-end; margin-top: 1.5em">
      <button (click)="toggleProfileEdit()" id="cancelarCrop">CANCELAR</button>
      <button id="salvarCrop">SALVAR</button>
    </div>
  </div>

  <div class="bgBlur" @aparecer *ngIf="popupDelete" (click)="toggleDelete()">
    <div style="position: relative; width: 150px; height: 150px">
      <img ngSrc="assets/gato.svg" alt="" fill/>
    </div>
  </div>
  <div id="deleteAcc" @aparecer *ngIf="popupDelete">
    <h1>Sentirei saudades :,(</h1>
    <p>Quando sua conta for deletada, suas postagens e comentários serão removidos da plataforma e seu usuário não
      poderá mais ser usado por ninguém.</p>
    <label for="senha">Para continuar, insira abaixo sua senha:</label>
    <div class="input-group">
      <input
        name="senha"
        style="border-radius: 50px 0 0 50px"
        type="password"
        class="form-control"
        id="senha"
        autocomplete="current-password"
      />
      <a style="text-decoration: none; cursor: pointer" (mouseover)="mouseIn($event)" (mouseleave)="mouseOut($event)">
        <span class="input-group-text" style="border-radius: 0 50px 50px 0">
          <span class="material-icons" id="verSenha">visibility_off</span>
        </span>
      </a>
    </div>

    <div class="botoesDelete">
      <button>CANCELAR</button>
      <button>APAGAR MINHA CONTA</button>
    </div>
  </div>
</div>
